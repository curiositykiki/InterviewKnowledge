## 第一章 概论 小结

1. TCP/IP协议族分为四层：**链路层、网络层、运输层、应用层**，其中网络层和运输层的区别最关键。网络层（IP）提供点到点的服务，运输层（TCP/UDP）提供端到端的服务。
2. 端口号1~1023一般都是知名端口号，我们不应该使用。客户端一般使用的是临时端口号，因为客户端请求完毕了就会关闭连接，而服务器需要一直开启端口保持提供服务。



## 第二章 链路层

1. 环回接口也就是localhost，指的是127.0.0.1这个IP地址，传给这个IP地址的**任何数据**都不会通过网络，只能留在本机；功能是用于测试本机收发数据报是否有bug。
2. 最大传输单元MTU，可以使用netstat查看网络接口的MTU，一般的以太网应该是1500字节。



## IP：网际协议

IP是TCP/IP协议族中最为核心的协议。所有的TCP、UDP、ICMP、IGMP**都以IP数据报**格式传输。

IP提供**不可靠、无连接**的传送服务。

①不可靠是指IP数据报不一定能到达目的地；②无连接是指IP不维护任何数据报后续状态信息，包括选择哪个路由、以什么顺序到达都不管；

**本章重点命令ifconfig、netstat**。

1. IP数据报首部

   **普通IP数据报长度为20字节。**包括：

   ①IP版本4位；

   ②首部长度4位；

   ③服务类型（TOS）8位（这个服务类型最小时延、最大吞吐量、最高可靠性、最小费用的设置，**使用tcpdump查看**）；

   ④总长度（如果有额外项目，则不止20字节，由于这个是16位的，所以**最长可以达到2^16-1 = 65535字节**，但是在链路上是需要分片的，并且主机一般**每次接受512~576字节的数据报**）；

   ⑤TTL（time-to-live）存活时间表示可以跳转路由的次数，一般是32或者64；

   ⑥首部检验和：初始为0，对首部分成16位一块进行二进制反码求和，结果取反就是检验和。收到该数据报后，分成16位一块进行二进制反码求和应该得到**全1**，否则出错。

   ⑦源IP地址和目的IP地址各占4字节；

   